(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(1),c=t(15),a=t.n(c),u=t(6),i=t(3),s=function(e){var n=e.nameToFilter,t=e.handleFilter;return Object(r.jsxs)("div",{children:["filter shown with: ",Object(r.jsx)("input",{value:n,onChange:t})]})},l=function(e){var n=e.addPhoneNumber,t=e.newName,o=e.handleNewName,c=e.newNumber,a=e.handleNewNumber;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:t,onChange:o})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:c,onChange:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.persons,t=e.nameToFilter,o=e.removeNumber;return Object(r.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(r.jsxs)("li",{children:[e.name," ",e.number,Object(r.jsx)("button",{onClick:function(){return o(e.id)},children:"delete"})]},e.id)}))})},b=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"Added"===n?"success":"error",children:n})},f=t(4),j=t.n(f),h="http://localhost:3001/api/persons",m=function(){return j.a.get(h).then((function(e){return e.data}))},O=function(e){return j.a.post(h,e).then((function(e){return e.data}))},v=function(e,n){return j.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){return j.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},p=function(){var e=Object(o.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),f=Object(i.a)(a,2),j=f[0],h=f[1],p=Object(o.useState)(""),x=Object(i.a)(p,2),N=x[0],g=x[1],C=Object(o.useState)(""),S=Object(i.a)(C,2),T=S[0],k=S[1],y=Object(o.useState)(null),F=Object(i.a)(y,2),L=F[0],A=F[1];Object(o.useEffect)((function(){m().then((function(e){return c(e)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Phonebook"}),Object(r.jsx)(b,{message:L}),Object(r.jsx)(s,{nameToFilter:T,handleFilter:function(e){console.log(e.target.value),k(e.target.value)}}),Object(r.jsx)("h2",{children:"Add a new"}),Object(r.jsx)(l,{addPhoneNumber:function(e){e.preventDefault();var n=t.filter((function(e){return e.name.toLowerCase()===j.toLowerCase()})),r={name:j,number:N,date:(new Date).toISOString()};if(n.length>0&&window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?"))){var o=t.find((function(e){return e.name.toLowerCase()===j.toLowerCase()})),a=Object(u.a)(Object(u.a)({},o),{},{number:N});v(o.id,a).then((function(e){c(t.map((function(n){return n.id!==o.id?n:e})))})).catch((function(e){A("".concat(e.response.data.error)),setTimeout((function(){A(null)}),5e3)}))}else O(r).then((function(e){c(t.concat(e)),A("Added ".concat(r.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){A("".concat(e.response.data.error)),setTimeout((function(){A(null)}),5e3)}));h(""),g("")},newName:j,handleNewName:function(e){h(e.target.value)},newNumber:N,handleNewNumber:function(e){g(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(d,{persons:t,nameToFilter:T,removeNumber:function(e){if(window.confirm("Do you really want to remove this number?")){var n=t.filter((function(n){return n.id===e}));w(e).then((function(n){c(t.filter((function(n){return n.id!==e})))})).catch((function(e){A("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){A(null)}),5e3)}))}}})]})};t(38);a.a.render(Object(r.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.472805e8.chunk.js.map